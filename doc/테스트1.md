# 테스트

## async처리의 도입

```text
수정 결과 분석
1. 오류 해결
asyncio.as_completed()의 Task 속성 문제를 asyncio.wait()로 해결했습니다
사용자-태스크 매핑을 딕셔너리로 안전하게 관리합니다
2. 테스트 결과 (매우 인상적!)
전체 처리 시간
동기 처리: 17.0초 (순차적)
비동기 처리: 11.3초 (동시)
성능 개선: +33.5% 🚀
완료 순서의 혁신
핵심 장점
B사용자가 A사용자를 기다리지 않고 1등으로 완료!
동시 처리로 전체 응답 시간 33% 단축
캐시 효과 100% (즉시 응답)
3. 실제 적용 가치
이 테스트는 현실적인 시나리오를 잘 보여줍니다:

LibreOffice 변환: CPU 집약적 작업
네트워크 다운로드: I/O 대기 시간
파일 저장: 디스크 I/O
결론: 웹 애플리케이션에서 비동기 처리는 단순한 성능 향상이 아니라 사용자 경험의 공정성을 제공합니다. 작은 요청이 큰 요청 때문에 기다리지 않아도 됩니다!

이제 실제 utils.py에 비동기 처리 도입을 고려해볼 만한 충분한 근거가 마련되었습니다.
```

## /convert 테스트

- 성공 케이스

```bash
# URL 방식 (HTML 변환)
curl "http://localhost:8003/convert?url=https://example.com/test.pdf&output=html"

# URL 방식 (PDF 변환)
curl "http://localhost:8003/convert?url=https://example.com/test.docx&output=pdf"

# 로컬 경로 방식 (실제 파일이 있는 경우)
curl "http://localhost:8003/convert?path=/tmp/test.docx&output=pdf"

# POST 방식
curl -X POST "http://localhost:8003/convert" \
  -H "Content-Type: application/json" \
  -d '{"url": "https://example.com/test.pdf", "output": "html"}'
```

-실패 케이스

```bash
# url과 path 둘 다 없음
curl "http://localhost:8003/convert?output=html"

# url과 path 둘 다 있음
curl "http://localhost:8003/convert?url=https://example.com/test.pdf&path=/tmp/test.docx&output=html"

# 잘못된 URL 형식
curl "http://localhost:8003/convert?url=invalid-url&output=html"

# 지원하지 않는 출력 형식
curl "http://localhost:8003/convert?url=https://example.com/test.pdf&output=docx"


```

- 설전 케이스

```bash
curl "http://localhost:8003/convert?path=c:\\tmp\\sample\\11.docx&output=pdf"
curl "http://localhost:8003/convert?path=c:\\tmp\\sample\\22.xlsx&output=pdf"
curl "http://localhost:8003/convert?path=c:\\tmp\\sample\\22.xlsx&output=html"
curl "http://localhost:8003/convert?path=c:\\tmp\\sample\\33.pptx&output=html"
curl "http://localhost:8003/convert?path=c:\\tmp\\sample\\33.pptx&output=pdf"
```
